;eraWIZから流用

@COM73
;撥弄髮型

PRINTL 擺弄髮型
STR:0 = 撥弄髮型

LOSEBASE:1 += 60

;順從、露出癖、調教者の技巧が影響
;入るソースは露出、屈従。順從が高いと情愛、技巧が低いと痛覚、ばっさり切ると逸脫
;バランス的に購入直後の奴隷の髪をばっさり切ると反抗刻印が付く程度に。効果は控えめ。

;ABL:順從をみる
IF ABL:10 == 0
	SOURCE:13 = 100
ELSEIF ABL:10 == 1
	SOURCE:3 = 10
	SOURCE:13 = 250
ELSEIF ABL:10 == 2
	SOURCE:3 = 100
	SOURCE:13 = 500
ELSEIF ABL:10 == 3
	SOURCE:3 = 250
	SOURCE:13 = 1000
ELSEIF ABL:10 == 4
	SOURCE:3 = 500
	SOURCE:13 = 1500
ELSE
	SOURCE:3 = 1000
	SOURCE:13 = 2000
ENDIF

;ABL:露出癖をみる
IF ABL:17 == 0
	SOURCE:12 = 500
ELSEIF ABL:17 == 1
	SOURCE:12 = 250
ELSEIF ABL:17 == 2
	SOURCE:12 = 100
ELSEIF ABL:17 == 3
	SOURCE:12 = 50
ELSEIF ABL:17 == 4
	SOURCE:12 = 25
ELSE
	SOURCE:12 = 10
ENDIF

;プレイヤーの技巧を見る
IF ABL:PLAYER:12 <= 3
	SOURCE:6 = 100
ELSEIF ABL:PLAYER:12 == 4
	SOURCE:6 = 10
ELSE
	SOURCE:6 = 0
ENDIF

CALL HAIRSET

RETURN 1

@HAIRSET
;X,Yは、カット、セットの変更を行ったかどうかを記録する（セリフ表示のため）
X = 0
Y = 0

;既にショートだと髪は切らない
SIF TALENT:302 <= 100
	GOTO INPUT_LOOP_HAIRSET

$INPUT_LOOP_HAIRCUT
PRINTFORML 剪%SAVESTR:TARGET%的頭髮嗎？
IF TALENT:302 <= 200
	PRINTL 現在[半長]
ELSE
	PRINTL 現在[長]
	PRINTL [0]---適當剪一下
ENDIF
PRINTL [1]---大刀闊斧地剪
PRINTL [2]---不剪
INPUT
IF RESULT == 0 && TALENT:302 >= 201
	L = 2
	SOURCE:14 = 500
ELSEIF RESULT == 1 && TALENT:302 >= 101
	L = 1
	SOURCE:14 = 500
	SIF TALENT:302 >= 201
		SOURCE:14 += 500
ELSEIF RESULT == 2
	L = 0
ELSE
	GOTO INPUT_LOOP_HAIRCUT
ENDIF

IF L
	PRINTL 剪成什麼樣子呢？
	PRINTL [0]---還是不剪了
	PRINTL [1]---自然的樣子
	PRINTL [2]---剪齊整
	PRINTL [3]---強調層次
	PRINTL [4]---強調蓬鬆感
	INPUT
	C = RESULT
	IF C >= 1 && C <= 4
		X = 1
		PRINTFORML %SAVESTR:PLAYER%把%SAVESTR:TARGET%的頭髮剪了。
		IF ABL:PLAYER:12 >= 5
			PRINTL 這個手藝，這個效果，去到哪裡都可以很自信了吧…
		ELSEIF ABL:PLAYER:12 >= 4
			PRINTL 天生的靈巧發揮了作用，總算完成了…
		ELSE
			PRINTL 沒什麼經驗做這個，完成的效果好像和想像中不同…
		ENDIF
		IF L == 2
			TALENT:302 = 101
		ELSE
			TALENT:302 = 1
		ENDIF
		TALENT:303 = C
		;髪を切ったときは髪型をナチュラルに
		TALENT:304 = 1
	ELSE
		PRINTL 放棄剪髮了。
	ENDIF
ENDIF

SIF X
	CALL HAIRSET_TALK_1

PRINTL  
$INPUT_LOOP_HAIRSET
PRINTFORML 把%SAVESTR:TARGET%的頭髮弄成什麼樣子？
PRINTL [1]---自然
PRINTL [2]---中分
PRINTL [3]---不均分
IF TALENT:302 >= 101
	PRINTL [4]---長束髮
	PRINTL [5]---馬尾
	PRINTL [6]---側馬尾
	PRINTL [7]---垂髮辮
	PRINTL [8]---雙馬尾
	PRINTL [9]---頂束髮
	PRINTL [10]--側束髮
	IF TALENT:302 >= 201
		PRINTL [11]--魚骨辮
		PRINTL [12]--卷髮
	ENDIF
ENDIF
PRINT 現在的髮型：
IF TALENT:304 == 1
	PRINTL 自然
ELSEIF TALENT:304 == 2
	PRINTL 中分
ELSEIF TALENT:304 == 3
	PRINTL 不均分
ELSEIF TALENT:304 == 4
	PRINTL 長束髮
ELSEIF TALENT:304 == 5
	PRINTL 馬尾
ELSEIF TALENT:304 == 6
	PRINTL 側馬尾
ELSEIF TALENT:304 == 7
	PRINTL 垂髮辮
ELSEIF TALENT:304 == 8
	PRINTL 雙馬尾
ELSEIF TALENT:304 == 9
	PRINTL 頂束髮
ELSEIF TALENT:304 == 10
	PRINTL 側束髮
ELSEIF TALENT:304 == 11
	PRINTL 魚骨辮
ELSEIF TALENT:304 == 12
	PRINTL 卷髮
ENDIF
INPUT
IF RESULT < 1 || RESULT > 14
	GOTO INPUT_LOOP_HAIRSET
ELSEIF TALENT:302 <= 200 && RESULT > 11
	GOTO INPUT_LOOP_HAIRSET
ELSEIF TALENT:302 <= 100 && RESULT > 4
	GOTO INPUT_LOOP_HAIRSET
ELSEIF RESULT == TALENT:304
	PRINTFORML %SAVESTR:TARGET%的髮型保持原樣。
ELSE
	TALENT:304 = RESULT
	PRINTFORM %SAVESTR:PLAYER%把%SAVESTR:TARGET%的髮型弄成
	IF TALENT:304 == 1
		PRINT 自然
	ELSEIF TALENT:304 == 2
		PRINT 中分
	ELSEIF TALENT:304 == 3
		PRINT 不均分
	ELSEIF TALENT:304 == 4
		PRINT 長束髮
	ELSEIF TALENT:304 == 5
		PRINT 馬尾
	ELSEIF TALENT:304 == 6
		PRINT 側馬尾
	ELSEIF TALENT:304 == 7
		PRINT 垂髮辮
	ELSEIF TALENT:304 == 8
		PRINT 雙馬尾
	ELSEIF TALENT:304 == 9
		PRINT 頂束髮
	ELSEIF TALENT:304 == 10
		PRINT 側束髮
	ELSEIF TALENT:304 == 11
		PRINT 魚骨辮
	ELSEIF TALENT:304 == 12
		PRINT 卷髮
	ENDIF
	PRINTL 了。
	IF ABL:PLAYER:12 >= 5
		PRINTL 這個手藝，這個效果，去到哪裡都可以很自信了吧…
	ELSEIF ABL:PLAYER:12 >= 4
		PRINTL 天生的靈巧發揮了作用，總算完成了…
	ELSE
		PRINTL 沒什麼經驗做這個，完成的效果好像和想像中不同…
	ENDIF
	Y = 1
ENDIF

SIF Y
	CALL HAIRSET_TALK_2

RETURN 1

;髪を切ったときのセリフ
@HAIRSET_TALK_1

RETURN 1

;髪型を変えたときのセリフ
@HAIRSET_TALK_2


RETURN 1
