@ENDCHECKDRAGONSIS
;普林希斯END判斷
SIF TALENT:GETCHARA(32):76 == 1
		EX_FLAG:2809 = -10
;就是鎖上了，淫龍公主劇情？不存在的

SIF GETCHARA(32) > 0 && EX_FLAG:2809 == 0 && CFLAG:GETCHARA(32):10 == 1
	EX_FLAG:2809 = 10
	;初次

;通過實驗室愛慕淫亂互換將導致劇情線重置
IF TALENT:GETCHARA(32):85 == 1 && EX_FLAG:2809 == -10
	EX_FLAG:2809 = 20
	;戀慕線起始2
	;由於龍公主不可直接獲得戀慕
	TALENT:GETCHARA(32):85 = 0
	CFLAG:GETCHARA(32):515 = 0
ELSEIF TALENT:GETCHARA(32):76 == 1 && EX_FLAG:2809 >= 20
	EX_FLAG:2809 = -10
	;無淫亂線
	CFLAG:GETCHARA(32):515 = 0
ENDIF

IF EX_FLAG:2809 >= 10 && EX_FLAG:2809 < 20
	IF CFLAG:GETCHARA(32):515 % 1000 >= 30
	;末三位為劇情事件判斷符，在這的作用就是，S01"初次tj"後作為劇情起點開始計時，累計到30後進行S02「記憶封印」劇情
		EX_FLAG:2809 = 20
	ELSE
		CFLAG:GETCHARA(32):515 += 1
	ENDIF
ELSEIF	EX_FLAG:2809 >= 20 && EX_FLAG:2809 < 30
	IF CFLAG:GETCHARA(32):515 % 1000 >= 45
		EX_FLAG:2809 = 30
	ELSE
		CFLAG:GETCHARA(32):515 += 1
	ENDIF
ELSEIF	EX_FLAG:2809 >= 30 && EX_FLAG:2809 < 40
	IF CFLAG:GETCHARA(32):515 % 1000 >= 50
		EX_FLAG:2809 = 40
	ELSE
		CFLAG:GETCHARA(32):515 += 1
	ENDIF
ELSEIF	EX_FLAG:2809 >= 30 && EX_FLAG:2809 < 40
	IF CFLAG:GETCHARA(32):515 % 1000 >= 60
		EX_FLAG:2809 = 40
	ELSE
		CFLAG:GETCHARA(32):515 += 1
	ENDIF
ELSEIF	EX_FLAG:2809 >= 40 && EX_FLAG:2809 < 50
	IF CFLAG:GETCHARA(32):515 % 1000 >= 70
		EX_FLAG:2809 = 50
	ELSE
		CFLAG:GETCHARA(32):515 += 1
	ENDIF
ELSEIF	EX_FLAG:2809 >= 50 && EX_FLAG:2809 < 60
	IF CFLAG:GETCHARA(32):515 % 1000 >= 70
		EX_FLAG:2809 = 60
	ELSE
		CFLAG:GETCHARA(32):515 += 1
	ENDIF
ELSEIF	EX_FLAG:2809 >= 60 && EX_FLAG:2809 < 70
	IF CFLAG:GETCHARA(32):515 % 1000 >= 80
		EX_FLAG:2809 = 70
	ELSE
		CFLAG:GETCHARA(32):515 += 1
	ENDIF
ELSEIF	EX_FLAG:2809 >= 70 && EX_FLAG:2809 < 80
	IF CFLAG:GETCHARA(32):515 % 1000 >= 100
		EX_FLAG:2809 = 80
	ELSE
		CFLAG:GETCHARA(32):515 += 1
	ENDIF
ELSEIF	EX_FLAG:2809 >= 80 && EX_FLAG:2809 < 90
	IF CFLAG:GETCHARA(32):515 % 1000 >= 110
		EX_FLAG:2809 = 90
	ELSE
		CFLAG:GETCHARA(32):515 += 1
	ENDIF	
ENDIF

@DRAGONSIS_NPC_FLAG(ARGS,ARG = 1)
#FUNCTION
SELECTCASE ARGS
	CASE "藍塞爾"
		LOCAL = 10000000000 * ARG
	CASE "艾麗珊"
		LOCAL = 1000000000 * ARG
	CASE "首席女巫"
		LOCAL = 100000000 * ARG
	CASE "奪心魔顧問"
		LOCAL = 10000000 * ARG
	CASE "獸人將軍"
		LOCAL = 1000000 * ARG
	CASE "魔界大公"
		LOCAL = 100000 * ARG
	CASE "大公長女"
		LOCAL = 10000 * ARG
	CASE "紅龍長老"
		LOCAL = 1000 * ARG
ENDSELECT
RETURNF LOCAL

@DE_DRAGONSIS_NPC_FLAG(ARGS,ARG = 1)
#FUNCTION
SELECTCASE ARGS
	CASE "藍塞爾"
		LOCAL = 10000000000 * ARG
	CASE "艾麗珊"
		LOCAL = 1000000000 * ARG
	CASE "首席女巫"
		LOCAL = 100000000 * ARG
	CASE "奪心魔顧問"
		LOCAL = 10000000 * ARG
	CASE "獸人將軍"
		LOCAL = 1000000 * ARG
	CASE "魔界大公"
		LOCAL = 100000 * ARG
	CASE "大公長女"
		LOCAL = 10000 * ARG
	CASE "紅龍長老"
		LOCAL = 1000 * ARG
ENDSELECT
RETURNF LOCAL
;上面這兩組是FLAG的轉換
;用法： 
;CFLAG:GETCHARA(32):515 += DRAGONSIS_NPC_FLAG("藍塞爾",N) 
;給藍塞爾的FLAG加上N的數值，空著不填就是1，不過最終值別超過10就是了，
;DE_DRAGONSIS_NPC_FLAG("藍塞爾")